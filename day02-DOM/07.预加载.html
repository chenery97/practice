<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #outer {
        width: 1000px;
        height: 30px;
        border: 1px solid salmon;
      }
      #outer #con {
        width: 0%;
        height: 100%;
        background-color: sandybrown;
      }
    </style>
  </head>
  <body>
    <div id="outer">
      <div id="con"></div>
    </div>
    <p>已经加载<span id="per">0</span>%</p>

    <script>
      var imgsrc = [
        "https://s3.ax1x.com/2020/12/08/rSCogx.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCh59.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCI81.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCfUJ.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCWE4.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCHKK.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPCKf.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCqbD.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCbDO.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCTv6.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCOVe.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCXUH.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCj5d.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCxPA.jpg",
        "https://s3.ax1x.com/2020/12/08/rSCz8I.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPPr8.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPS2t.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPpxP.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPiqS.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPkVg.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPE5j.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPZPs.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPMrT.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPeGn.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPm2q.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPnx0.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPQqU.jpg",
        "https://s3.ax1x.com/2020/12/08/rSPKMV.jpg",
        "https://s3.ax1x.com/2020/12/08/rSP3a4.jpg",
        "https://s3.ax1x.com/2020/12/08/rSP1ZF.jpg",
      ];

      var oCon = document.getElementById("con");
      var oPer = document.getElementById("per");
      var count = 0;
      imgsrc.forEach(function (item) {
        var newImg = new Image();
        newImg.src = item;
        newImg.onload = function () {
          // 加载完一张图片进行累计
          count++;
          // 根据当前已加载完成图片和总的图片进行计算百分比
          var per = parseInt((count / imgsrc.length) * 100);
          // 把结果赋给加载条的宽度和应该显示的百分比
          oCon.style.width = per + "%";
          oPer.textContent = per;
        };
      });
    </script>
  </body>
</html>
